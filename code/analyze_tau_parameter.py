#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
åˆ†ææ—¶é—´è¡°å‡å‚æ•°Ï„çš„å½±å“
"""

import numpy as np

print("="*80)
print("åˆ†ææ—¶é—´è¡°å‡å‚æ•° Ï„ çš„å½±å“")
print("="*80)

# æµ‹è¯•ä¸åŒçš„Ï„å€¼
tau_values = {
    '1å°æ—¶': 60,
    '6å°æ—¶': 360,
    '1å¤©': 1440,
    '3å¤©': 4320,
    '7å¤©': 10080,
    '14å¤©': 20160
}

# æµ‹è¯•ä¸åŒçš„æ—¶é—´é—´éš”Î”t
delta_t_values = [
    1,      # 1åˆ†é’Ÿ
    10,     # 10åˆ†é’Ÿ
    60,     # 1å°æ—¶
    360,    # 6å°æ—¶
    1440,   # 1å¤©
    2880,   # 2å¤©
    4320,   # 3å¤©
    7200,   # 5å¤©
    10080,  # 7å¤©
    14400,  # 10å¤©
    20160   # 14å¤©
]

delta_t_labels = ['1min', '10min', '1h', '6h', '1d', '2d', '3d', '5d', '7d', '10d', '14d']

print("\næ—¶é—´å› å­ = Î”t / (Î”t + Ï„)")
print("\nä¸åŒÏ„å€¼ä¸‹ï¼Œæ—¶é—´å› å­éšæ—¶é—´é—´éš”çš„å˜åŒ–:")
print("-"*80)
print(f"{'Î”t':<8}", end='')
for tau_name in tau_values.keys():
    print(f"{tau_name:<12}", end='')
print()
print("-"*80)

for i, dt in enumerate(delta_t_values):
    print(f"{delta_t_labels[i]:<8}", end='')
    for tau_name, tau in tau_values.items():
        time_factor = dt / (dt + tau)
        print(f"{time_factor:<12.4f}", end='')
    print()

# å‡è®¾å­¦ç”ŸæŒæ¡ç¨‹åº¦ s_t,c = 0.3ï¼ˆè¾ƒå·®ï¼‰
print("\n" + "="*80)
print("å‡è®¾å­¦ç”ŸæŒæ¡ç¨‹åº¦ s_t,c = 0.3 (è¾ƒå·®)")
print("Forgetting Score = (1 - s_t,c) Ã— (Î”t / (Î”t + Ï„)) = 0.7 Ã— æ—¶é—´å› å­")
print("-"*80)
print(f"{'Î”t':<8}", end='')
for tau_name in tau_values.keys():
    print(f"{tau_name:<12}", end='')
print()
print("-"*80)

s_tc = 0.3
for i, dt in enumerate(delta_t_values):
    print(f"{delta_t_labels[i]:<8}", end='')
    for tau_name, tau in tau_values.items():
        time_factor = dt / (dt + tau)
        forgetting_score = (1 - s_tc) * time_factor
        print(f"{forgetting_score:<12.4f}", end='')
    print()

# å…³é”®è§‚å¯Ÿ
print("\n" + "="*80)
print("å…³é”®è§‚å¯Ÿï¼š")
print("="*80)

print("\n1. Ï„ = 1å°æ—¶ (60åˆ†é’Ÿ):")
print("   - 1åˆ†é’Ÿå: æ—¶é—´å› å­ = 0.0164 â†’ Forgetting Score = 0.0115")
print("   - 1å°æ—¶å: æ—¶é—´å› å­ = 0.5 â†’ Forgetting Score = 0.35")
print("   - 1å¤©å:   æ—¶é—´å› å­ = 0.96 â†’ Forgetting Score = 0.67")
print("   âš ï¸  å¤ªæ•æ„Ÿï¼1å°æ—¶å°±è¾¾åˆ°50%æƒé‡")

print("\n2. Ï„ = 1å¤© (1440åˆ†é’Ÿ):")
print("   - 1åˆ†é’Ÿå: æ—¶é—´å› å­ = 0.0007 â†’ Forgetting Score = 0.0005")
print("   - 1å°æ—¶å: æ—¶é—´å› å­ = 0.04 â†’ Forgetting Score = 0.03")
print("   - 1å¤©å:   æ—¶é—´å› å­ = 0.5 â†’ Forgetting Score = 0.35")
print("   - 3å¤©å:   æ—¶é—´å› å­ = 0.75 â†’ Forgetting Score = 0.525")
print("   âœ… è¾ƒåˆç†ï¼çŸ­æœŸå½±å“å°ï¼Œ1å¤©è¾¾åˆ°50%æƒé‡")

print("\n3. Ï„ = 7å¤© (10080åˆ†é’Ÿ) [å½“å‰è®¾ç½®]:")
print("   - 1åˆ†é’Ÿå: æ—¶é—´å› å­ = 0.0001 â†’ Forgetting Score = 0.00007")
print("   - 1å°æ—¶å: æ—¶é—´å› å­ = 0.006 â†’ Forgetting Score = 0.004")
print("   - 1å¤©å:   æ—¶é—´å› å­ = 0.125 â†’ Forgetting Score = 0.088")
print("   - 7å¤©å:   æ—¶é—´å› å­ = 0.5 â†’ Forgetting Score = 0.35")
print("   âš ï¸  å¤ªä¸æ•æ„Ÿï¼éœ€è¦7å¤©æ‰è¾¾åˆ°50%æƒé‡")

print("\n4. Ï„ = 3å¤© (4320åˆ†é’Ÿ):")
print("   - 1å°æ—¶å: æ—¶é—´å› å­ = 0.014 â†’ Forgetting Score = 0.01")
print("   - 1å¤©å:   æ—¶é—´å› å­ = 0.25 â†’ Forgetting Score = 0.175")
print("   - 3å¤©å:   æ—¶é—´å› å­ = 0.5 â†’ Forgetting Score = 0.35")
print("   - 7å¤©å:   æ—¶é—´å› å­ = 0.63 â†’ Forgetting Score = 0.44")
print("   âœ… è¾ƒåˆç†ï¼3å¤©è¾¾åˆ°50%æƒé‡")

# è·³è¿‡å¯è§†åŒ–ï¼ˆmatplotlibæœªå®‰è£…ï¼‰
print("\nâš ï¸  è·³è¿‡å¯è§†åŒ–å›¾è¡¨ç”Ÿæˆï¼ˆmatplotlibæœªå®‰è£…ï¼‰")

# æ¨è
print("\n" + "="*80)
print("ğŸ’¡ æ¨èè®¾ç½®ï¼š")
print("="*80)

print("""
æ ¹æ®åˆ†æï¼Œæ¨èæ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©Ï„ï¼š

1. **çŸ­æœŸå­¦ä¹ åœºæ™¯** (å¦‚è¯¾å ‚ç»ƒä¹ ã€å½“å¤©å¤ä¹ ):
   Ï„ = 1å¤© (1440åˆ†é’Ÿ)
   - 1å°æ—¶åå¼€å§‹æœ‰æ˜æ˜¾å½±å“
   - 1å¤©è¾¾åˆ°50%æƒé‡
   - é€‚åˆæ—¥å¸¸å­¦ä¹ è·Ÿè¸ª

2. **ä¸­æœŸå­¦ä¹ åœºæ™¯** (å¦‚å‘¨æœŸæ€§å¤ä¹ ):
   Ï„ = 3å¤© (4320åˆ†é’Ÿ) â­æ¨èâ­
   - å¹³è¡¡çŸ­æœŸå’Œé•¿æœŸå½±å“
   - 3å¤©è¾¾åˆ°50%æƒé‡
   - é€‚åˆå¤§å¤šæ•°æ•™è‚²åœºæ™¯

3. **é•¿æœŸå­¦ä¹ åœºæ™¯** (å¦‚å­¦æœŸå¤ä¹ ã€é•¿æœŸçŸ¥è¯†ä¿æŒ):
   Ï„ = 7å¤© (10080åˆ†é’Ÿ) [å½“å‰è®¾ç½®]
   - å…³æ³¨é•¿æœŸé—å¿˜
   - 7å¤©è¾¾åˆ°50%æƒé‡
   - é€‚åˆé•¿æœŸçŸ¥è¯†è¿½è¸ª

4. **è‡ªé€‚åº”è®¾ç½®** (æ ¹æ®conceptéš¾åº¦):
   - ç®€å•concept: Ï„ = 7å¤©
   - ä¸­ç­‰concept: Ï„ = 3å¤©
   - å›°éš¾concept: Ï„ = 1å¤©
   
æ¨èæ”¹ä¸º Ï„ = 3å¤© (4320åˆ†é’Ÿ) ä½œä¸ºé»˜è®¤å€¼ï¼
""")

print("="*80)

