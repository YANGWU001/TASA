# è®­ç»ƒè¿›ç¨‹ä¸Terminalçª—å£å®‰å…¨æŒ‡å—

## âš ï¸ å½“å‰çŠ¶æ€

æ‚¨çš„è®­ç»ƒè¿›ç¨‹ç›®å‰çš„çŠ¶æ€ï¼š

- âœ… **æ­£åœ¨åå°è¿è¡Œ**ï¼šä¸¤ä¸ªæ¨¡å‹éƒ½åœ¨GPUä¸Šæ­£å¸¸è®­ç»ƒ
- âœ… **æ²¡æœ‰æ§åˆ¶ç»ˆç«¯**ï¼šè¿›ç¨‹çš„TTYæ˜¾ç¤ºä¸º`?`
- âš ï¸ **å¯èƒ½ä¸å®‰å…¨**ï¼šå¯åŠ¨æ—¶æ²¡æœ‰ä½¿ç”¨`nohup`å‘½ä»¤

### å…³é—­Terminalçš„é£é™©

**å¦‚æœå…³é—­å½“å‰terminalçª—å£ï¼š**
- ğŸ˜Ÿ **å¯èƒ½ä¼šç»ˆæ­¢è®­ç»ƒ**ï¼šè¿›ç¨‹å¯èƒ½æ”¶åˆ°SIGHUPä¿¡å·è€Œè¢«æ€æ­»
- ğŸ“Š **å·²æœ‰çš„è®­ç»ƒè¿›åº¦ä¼šä¿å­˜**ï¼šcheckpointæ–‡ä»¶å·²ç»åœ¨ç£ç›˜ä¸Š
- ğŸ’¾ **WandBæ•°æ®å·²åŒæ­¥**ï¼šå·²è®°å½•çš„æ•°æ®ä¸ä¼šä¸¢å¤±

## ğŸ”§ ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä¿æŒTerminalå¼€å¯ï¼ˆç®€å•ä½†ä¸å¤Ÿå®‰å…¨ï¼‰

å¦‚æœæ‚¨æƒ³ç»§ç»­å½“å‰çš„è®­ç»ƒè€Œä¸ä¸­æ–­ï¼š

```bash
# ä¸è¦å…³é—­å½“å‰terminalçª—å£
# è®­ç»ƒä¼šç»§ç»­è¿›è¡Œï¼Œä½†å…³é—­çª—å£å¯èƒ½å¯¼è‡´è¿›ç¨‹ç»ˆæ­¢
```

**ä¼˜ç‚¹**ï¼šä¸éœ€è¦é‡å¯è®­ç»ƒï¼Œå½“å‰è¿›åº¦ä¸ä¸¢å¤±  
**ç¼ºç‚¹**ï¼šå¿…é¡»ä¿æŒterminalçª—å£å¼€å¯ï¼Œå…³é—­å¯èƒ½å¯¼è‡´è®­ç»ƒä¸­æ–­

---

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨nohupå®‰å…¨é‡å¯ï¼ˆæ¨èâ­ï¼‰

å®Œå…¨ç¡®ä¿è®­ç»ƒä¸ä¼šè¢«terminalå…³é—­å½±å“ï¼š

```bash
bash /mnt/localssd/restart_training_safe.sh
```

**è¿™ä¸ªè„šæœ¬ä¼šï¼š**
1. åœæ­¢å½“å‰è®­ç»ƒè¿›ç¨‹
2. ä½¿ç”¨`nohup`é‡æ–°å¯åŠ¨è®­ç»ƒ
3. å¦‚æœå­˜åœ¨checkpointï¼Œä»æœ€åçš„checkpointç»§ç»­è®­ç»ƒ
4. ç¡®ä¿å³ä½¿å…³é—­terminalï¼Œè®­ç»ƒä¹Ÿä¼šç»§ç»­

**ä¼˜ç‚¹**ï¼šå®Œå…¨å®‰å…¨ï¼Œå¯ä»¥éšæ—¶å…³é—­terminal  
**ç¼ºç‚¹**ï¼šä¼šé‡å¯è®­ç»ƒè¿›ç¨‹ï¼ˆä½†ä»checkpointç»§ç»­ï¼Œä¸ä¼šä¸¢å¤±è¿›åº¦ï¼‰

---

## ğŸ“Š å½“å‰è®­ç»ƒè¿›ç¨‹ä¿¡æ¯

```bash
# æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€
ps aux | grep wandb_lpkt_train | grep -v grep

# æŸ¥çœ‹è®­ç»ƒè¿›åº¦
bash /mnt/localssd/show_progress.sh

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f /tmp/lpkt_ednet_live.log        # EdNetè®­ç»ƒ
tail -f /tmp/lpkt_assist2017_live.log   # ASSISTments2017è®­ç»ƒ
```

## ğŸ’¾ Checkpointæœºåˆ¶

pykt-toolkitä¼šè‡ªåŠ¨ä¿å­˜checkpointï¼š

- **ä¿å­˜ä½ç½®**ï¼š
  - EdNet: `/mnt/localssd/pykt-toolkit/examples/saved_model/ednet_lpkt_qid_saved_model_42_0_0.003_0.2_64_64_64_0.03_0_0/`
  - ASSISTments2017: `/mnt/localssd/pykt-toolkit/examples/saved_model/assist2017_lpkt_qid_saved_model_42_0_0.003_0.2_64_64_64_0.03_0_0/`

- **ä¿å­˜é¢‘ç‡**ï¼šæ¯ä¸ªepochç»“æŸåä¿å­˜
- **æ¢å¤è®­ç»ƒ**ï¼šé‡æ–°è¿è¡Œè®­ç»ƒå‘½ä»¤æ—¶ï¼Œä¼šè‡ªåŠ¨ä»æœ€åçš„checkpointç»§ç»­

## ğŸ¯ æ¨èæ“ä½œæµç¨‹

### å¦‚æœæ‚¨æƒ³è¦æœ€å¤§å®‰å…¨æ€§ï¼š

```bash
# 1. ä½¿ç”¨nohupå®‰å…¨é‡å¯
bash /mnt/localssd/restart_training_safe.sh

# 2. ç­‰å¾…å‡ ç§’ç¡®è®¤å¯åŠ¨æˆåŠŸ
sleep 5

# 3. æ£€æŸ¥è¿›ç¨‹çŠ¶æ€
ps aux | grep wandb_lpkt_train | grep -v grep

# 4. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤è®­ç»ƒæ­£å¸¸
tail -f /tmp/lpkt_ednet_safe.log
# æŒ‰Ctrl+Cé€€å‡ºtailå‘½ä»¤

# 5. ç°åœ¨å¯ä»¥å®‰å…¨å…³é—­terminaläº†ï¼
```

### å¦‚æœæ‚¨æƒ³ç»§ç»­å½“å‰è®­ç»ƒï¼ˆä¸é‡å¯ï¼‰ï¼š

```bash
# ä¿æŒterminalçª—å£å¼€å¯
# æˆ–è€…ä½¿ç”¨screen/tmuxç­‰å·¥å…·
screen -S training
# ç„¶åå¯ä»¥detach (Ctrl+A, D)
```

## ğŸ” éªŒè¯è®­ç»ƒæ˜¯å¦å—nohupä¿æŠ¤

```bash
# æŸ¥çœ‹è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤
ps -o pid,cmd -p $(pgrep -f wandb_lpkt_train | head -1)

# å¦‚æœå‘½ä»¤ä¸­åŒ…å«"nohup"ï¼Œè¯´æ˜å·²å—ä¿æŠ¤
# å¦‚æœæ²¡æœ‰ï¼Œå»ºè®®è¿è¡Œ restart_training_safe.sh
```

## ğŸ“ é‡è¦æç¤º

1. **WandBç™»å½•**ï¼šä½¿ç”¨nohupé‡å¯åï¼Œä»ç„¶éœ€è¦ç¡®ä¿WandBå·²ç™»å½•
2. **Checkpoint**ï¼šå³ä½¿è®­ç»ƒä¸­æ–­ï¼Œå·²ä¿å­˜çš„checkpointä¸ä¼šä¸¢å¤±
3. **æ—¥å¿—æ–‡ä»¶**ï¼šä½¿ç”¨nohupåï¼Œæ—¥å¿—æ–‡ä»¶åä¼šæ”¹ä¸º`*_safe.log`
4. **GPUç›‘æ§**ï¼šå¯ä»¥ä½¿ç”¨`nvidia-smi`ç¡®è®¤è®­ç»ƒä»åœ¨è¿è¡Œ

---

## ğŸ†˜ å¦‚æœè®­ç»ƒæ„å¤–ä¸­æ–­

```bash
# 1. æ£€æŸ¥checkpointæ˜¯å¦å­˜åœ¨
ls -lh /mnt/localssd/pykt-toolkit/examples/saved_model/*/

# 2. ä½¿ç”¨å®‰å…¨é‡å¯è„šæœ¬æ¢å¤è®­ç»ƒ
bash /mnt/localssd/restart_training_safe.sh

# 3. è®­ç»ƒä¼šè‡ªåŠ¨ä»æœ€åçš„checkpointç»§ç»­
```

---

**æ€»ç»“**ï¼šå¦‚æœæ‚¨ä¸ç¡®å®šï¼Œå»ºè®®ä½¿ç”¨ `bash /mnt/localssd/restart_training_safe.sh` é‡å¯è®­ç»ƒï¼Œè¿™æ ·å¯ä»¥100%ç¡®ä¿å…³é—­terminalä¸ä¼šå½±å“è®­ç»ƒã€‚

