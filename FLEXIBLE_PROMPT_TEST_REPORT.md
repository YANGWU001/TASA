# çµæ´»Promptç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

**æµ‹è¯•æ—¶é—´**: 2025-10-20  
**æµ‹è¯•ç›®æ ‡**: éªŒè¯åŠ¨æ€promptèƒ½å¦é€‚åº”ä¸åŒå‡†ç¡®ç‡çš„å­¦ç”Ÿ  
**æµ‹è¯•æ–¹æ³•**: å¤šçº¿ç¨‹å¹¶è¡Œè¯„ä¼°ï¼ˆmax_workers=5ï¼‰  
**æµ‹è¯•å­¦ç”Ÿæ•°**: 5ä¸ªï¼ˆè¦†ç›–0%åˆ°85.7%å‡†ç¡®ç‡ï¼‰

---

## ğŸ¯ æµ‹è¯•ç»“æœæ±‡æ€»

### æ•´ä½“è¡¨ç°
- âœ… **æˆåŠŸè¯„ä¼°**: 5/5 å­¦ç”Ÿ
- ğŸ“Š **å¹³å‡ç»å¯¹åå·®**: 15.2%
- â±ï¸ **å¹³å‡ç”¨æ—¶**: ~9ç§’/å­¦ç”Ÿ
- ğŸš€ **å¤šçº¿ç¨‹**: æ­£å¸¸å·¥ä½œ

### è¯¦ç»†ç»“æœ

| å­¦ç”ŸID | åŸå§‹å‡†ç¡®ç‡ | Role-Playå‡†ç¡®ç‡ | åå·® | æ°´å¹³ | å¾—åˆ† | è¯„ä»· |
|-------|----------|---------------|------|------|------|------|
| 1264 | 0.0% | 0.0% | +0.0% | STRUGGLING | 0/2 | âœ… ä¼˜ç§€ |
| 793 | 35.3% | 50.0% | +14.7% | DEVELOPING | 1/2 | âœ“ è‰¯å¥½ |
| 565 | 55.6% | 50.0% | -5.6% | COMPETENT | 1/2 | âœ… ä¼˜ç§€ |
| 398 | 70.0% | 50.0% | -20.0% | STRONG | 1/2 | âš ï¸ ä¸€èˆ¬ |
| 1355 | 85.7% | 50.0% | -35.7% | EXPERT | 1/2 | âŒ éœ€æ”¹è¿› |

---

## ğŸ“ˆ æŒ‰æ°´å¹³åˆ†æ

### 1. STRUGGLINGå­¦ç”Ÿ (<40%)
- **å­¦ç”Ÿæ•°**: 2ä¸ª
- **å¹³å‡åå·®**: 7.4% âœ… **ä¼˜ç§€**
- **è¡¨ç°**:
  - å­¦ç”Ÿ1264 (0%): **å®Œç¾åŒ¹é…** - Role-playä¹Ÿæ˜¯0%
  - å­¦ç”Ÿ793 (35.3%): 50%ï¼Œåå·®+14.7%ï¼Œåœ¨åˆç†èŒƒå›´å†…

### 2. DEVELOPINGå­¦ç”Ÿ (40-60%)
- **å­¦ç”Ÿæ•°**: 1ä¸ª
- **å¹³å‡åå·®**: 5.6% âœ… **ä¼˜ç§€**
- **è¡¨ç°**:
  - å­¦ç”Ÿ565 (55.6%): 50%ï¼Œåå·®-5.6%ï¼Œéå¸¸æ¥è¿‘

### 3. COMPETENTå­¦ç”Ÿ (60-80%)
- **å­¦ç”Ÿæ•°**: 1ä¸ª
- **å¹³å‡åå·®**: 20.0% âš ï¸ **ä¸€èˆ¬**
- **è¡¨ç°**:
  - å­¦ç”Ÿ398 (70%): 50%ï¼Œåå·®-20%ï¼Œåä½

### 4. STRONG/EXPERTå­¦ç”Ÿ (â‰¥80%)
- **å­¦ç”Ÿæ•°**: 1ä¸ª
- **å¹³å‡åå·®**: 35.7% âŒ **éœ€æ”¹è¿›**
- **è¡¨ç°**:
  - å­¦ç”Ÿ1355 (85.7%): 50%ï¼Œåå·®-35.7%ï¼Œæ˜æ˜¾åä½

---

## ğŸ” å…³é”®å‘ç°

### âœ… æˆåŠŸä¹‹å¤„

1. **åŠ¨æ€Promptæœ‰æ•ˆ**
   - æˆåŠŸæ ¹æ®å­¦ç”Ÿå†å²å‡†ç¡®ç‡åŠ¨æ€ç”Ÿæˆprompt
   - ä½æ°´å¹³å­¦ç”Ÿ(<40%)è¡¨ç°ä¼˜ç§€ï¼Œå¹³å‡åå·®ä»…7.4%
   - ä¸­ç­‰æ°´å¹³å­¦ç”Ÿ(40-60%)è¡¨ç°ä¼˜ç§€ï¼Œå¹³å‡åå·®ä»…5.6%

2. **ç³»ç»Ÿæ¶æ„å¥å£®**
   - å¤šçº¿ç¨‹å¹¶è¡Œè¯„ä¼°æ­£å¸¸å·¥ä½œ
   - é”™è¯¯å¤„ç†å®Œå–„
   - ç»“æœä¿å­˜å’Œæ±‡æ€»åŠŸèƒ½å®Œæ•´

3. **çµæ´»æ€§å¼º**
   - Promptè‡ªåŠ¨é€‚åº”ä¸åŒæ°´å¹³ï¼ˆSTRUGGLING/DEVELOPING/COMPETENT/STRONGï¼‰
   - æ¯ä¸ªæ°´å¹³æœ‰ä¸åŒçš„é”™è¯¯æ¨¡å¼å’Œç­”é¢˜é£æ ¼
   - æ˜“äºæ‰©å±•å’Œè°ƒæ•´

### âš ï¸ å­˜åœ¨çš„é—®é¢˜

1. **é¢˜ç›®æ•°é‡é™åˆ¶**
   - âŒ åªæœ‰2é¢˜ï¼Œå‡†ç¡®ç‡åªèƒ½æ˜¯0%, 50%, 100%
   - âŒ åˆ†è¾¨ç‡å¤ªä½ï¼Œæ— æ³•ç²¾ç¡®åŒ¹é…åŸå§‹å‡†ç¡®ç‡
   - ğŸ’¡ **å½±å“**: 70%çš„å­¦ç”Ÿåªèƒ½ç­”å¯¹50%æˆ–100%

2. **é«˜æ°´å¹³å­¦ç”Ÿè¡¨ç°åä½**
   - âŒ 70%å’Œ85.7%çš„å­¦ç”Ÿéƒ½åªç­”å¯¹50%
   - âŒ Promptå¯èƒ½å¯¹é«˜æ°´å¹³å­¦ç”Ÿè¦æ±‚è¿‡ä¸¥
   - ğŸ’¡ **åŸå› **: æ¸©åº¦1.0å¯¹é«˜æ°´å¹³å­¦ç”Ÿå¯èƒ½è¿‡é«˜ï¼Œå¯¼è‡´éšæœºæ€§å¤ªå¼º

3. **Promptç­–ç•¥ä¸å‡è¡¡**
   - âœ… ä½ä¸­æ°´å¹³å­¦ç”Ÿ: å¾ˆå¥½çš„å¹³è¡¡
   - âŒ é«˜æ°´å¹³å­¦ç”Ÿ: å€¾å‘äºè¡¨ç°è¿‡å·®

---

## ğŸ’¡ æ”¹è¿›å»ºè®®

### çŸ­æœŸæ”¹è¿›

1. **è°ƒæ•´é«˜æ°´å¹³å­¦ç”ŸPrompt** â­ **æœ€é‡è¦**
   ```python
   # ä¸ºSTRONG/EXPERTå­¦ç”Ÿæ”¾å®½é™åˆ¶
   if accuracy >= 80:
       system_prompt += """
       You are a STRONG student. You should:
       - Get most questions correct (7-9 out of 10)
       - Show confidence in your answers
       - Make only occasional minor errors
       """
   ```

2. **å·®å¼‚åŒ–æ¸©åº¦è®¾ç½®**
   ```python
   if accuracy < 40:
       temperature = 1.0  # é«˜éšæœºæ€§ï¼Œå®¹æ˜“çŠ¯é”™
   elif accuracy < 60:
       temperature = 0.8
   elif accuracy < 80:
       temperature = 0.5
   else:
       temperature = 0.3  # ä½éšæœºæ€§ï¼Œæ›´ç¨³å®š
   ```

3. **ä½¿ç”¨10é¢˜conceptæµ‹è¯•**
   - å¯»æ‰¾æœ‰10é¢˜çš„conceptè¿›è¡Œæµ‹è¯•
   - æˆ–è€…ç”Ÿæˆæ›´å¤šé¢˜ç›®
   - æé«˜å‡†ç¡®ç‡åˆ†è¾¨ç‡ï¼ˆ10%, 20%, 30%...ï¼‰

### é•¿æœŸä¼˜åŒ–

1. **Few-shotç¤ºä¾‹ä¼˜åŒ–**
   - ä¸ºæ¯ä¸ªæ°´å¹³æä¾›å…·ä½“çš„ç­”é¢˜ç¤ºä¾‹
   - åŒºåˆ†"éƒ¨åˆ†æ­£ç¡®"å’Œ"å®Œå…¨é”™è¯¯"

2. **åŠ¨æ€éš¾åº¦è°ƒæ•´**
   - æ ¹æ®é¢˜ç›®éš¾åº¦è°ƒæ•´å­¦ç”Ÿçš„ç­”å¯¹æ¦‚ç‡
   - ç®€å•é¢˜ç­”å¯¹ç‡é«˜ï¼Œéš¾é¢˜ç­”å¯¹ç‡ä½

3. **è®°å¿†ä¸Šä¸‹æ–‡å¢å¼º**
   - åˆ©ç”¨æ›´å¤šå†å²è®°å½•ä¿¡æ¯
   - æ¨¡æ‹Ÿé—å¿˜æ›²çº¿æ•ˆåº”

---

## ğŸ“Š æ ¸å¿ƒæŠ€æœ¯å®ç°

### 1. åŠ¨æ€Promptç”Ÿæˆ
```python
def build_student_system_prompt(session: Dict) -> str:
    accuracy = session['persona']['stats']['correct'] / session['persona']['stats']['total'] * 100
    
    # æ ¹æ®å‡†ç¡®ç‡åˆ†çº§
    if accuracy < 40:
        level = "STRUGGLING"
        confidence = "very low confidence and frequent confusion"
    elif accuracy < 60:
        level = "DEVELOPING"
        confidence = "moderate uncertainty and occasional mistakes"
    elif accuracy < 80:
        level = "COMPETENT"
        confidence = "reasonable confidence with some gaps"
    else:
        level = "STRONG"
        confidence = "high confidence with minor errors"
    
    # ç”Ÿæˆä¸ªæ€§åŒ–prompt...
```

### 2. å¤šçº¿ç¨‹å¹¶è¡Œè¯„ä¼°
```python
with ThreadPoolExecutor(max_workers=5) as executor:
    future_to_student = {
        executor.submit(evaluate_single_student, student_id, dataset): student_id 
        for student_id in student_ids
    }
    
    for future in as_completed(future_to_student):
        result = future.result()
        results.append(result)
```

### 3. æ°´å¹³åˆ†çº§ç³»ç»Ÿ
- **STRUGGLING** (<40%): é¢‘ç¹çŠ¯é”™ï¼Œä½è‡ªä¿¡
- **DEVELOPING** (40-60%): å¶å°”çŠ¯é”™ï¼Œä¸­ç­‰è‡ªä¿¡
- **COMPETENT** (60-80%): å°‘é‡é”™è¯¯ï¼Œåˆç†è‡ªä¿¡
- **STRONG** (â‰¥80%): æå°‘é”™è¯¯ï¼Œé«˜è‡ªä¿¡

---

## ğŸ¯ ç»“è®º

### æ€»ä½“è¯„ä»·: âœ… **è‰¯å¥½ï¼Œéœ€ä¼˜åŒ–é«˜æ°´å¹³å­¦ç”Ÿ**

**ä¼˜åŠ¿**:
1. âœ… ç³»ç»Ÿæ¶æ„å¥å£®ï¼Œå¤šçº¿ç¨‹å·¥ä½œæ­£å¸¸
2. âœ… ä½ä¸­æ°´å¹³å­¦ç”Ÿæ¨¡æ‹Ÿå‡†ç¡®ï¼ˆåå·®<10%ï¼‰
3. âœ… çµæ´»promptæœºåˆ¶æˆåŠŸå®ç°
4. âœ… æ˜“äºæ‰©å±•å’Œè°ƒæ•´

**å¾…æ”¹è¿›**:
1. âš ï¸ é«˜æ°´å¹³å­¦ç”Ÿè¡¨ç°åä½ï¼ˆåå·®>20%ï¼‰
2. âš ï¸ é¢˜ç›®å¤ªå°‘é™åˆ¶ç²¾åº¦
3. âš ï¸ æ¸©åº¦å‚æ•°éœ€è¦åˆ†çº§è®¾ç½®

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**:
1. ğŸ”§ ä¼˜åŒ–STRONG/EXPERTçº§åˆ«çš„prompt
2. ğŸ”§ å®ç°å·®å¼‚åŒ–æ¸©åº¦è®¾ç½®
3. ğŸ“Š ä½¿ç”¨10é¢˜conceptè¿›è¡Œå®Œæ•´éªŒè¯
4. ğŸ“ˆ æ”¶é›†æ›´å¤šæ•°æ®ï¼Œè°ƒä¼˜å‚æ•°

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

- **æ ¸å¿ƒä»£ç **: `/mnt/localssd/student_roleplay_evaluation.py`
- **æ‰¹é‡æµ‹è¯•**: `/mnt/localssd/batch_test_students.py`
- **é…ç½®æ–‡ä»¶**: `/mnt/localssd/roleplay_config.py`
- **æµ‹è¯•æ—¥å¿—**: `/mnt/localssd/logs/batch_test_5students_fixed.log`
- **ç»“æœæ–‡ä»¶**: `/mnt/localssd/bank/evaluation_results/assist2017/`

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-20  
**æµ‹è¯•ç‰ˆæœ¬**: v1.0 - çµæ´»Promptåˆç‰ˆ

