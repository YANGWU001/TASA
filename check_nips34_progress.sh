#!/bin/bash

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘              ğŸ“Š TASA-Llama nips_task34è¿›åº¦æ£€æŸ¥                              â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# æ£€æŸ¥è¿›ç¨‹çŠ¶æ€
if ps -p 318124 > /dev/null 2>&1; then
    echo "âœ… TASA-Llamaè¿›ç¨‹æ­£åœ¨è¿è¡Œ (PID: 318124)"
else
    echo "âŒ TASA-Llamaè¿›ç¨‹æœªè¿è¡Œ"
fi

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“Š å„Methodè¿›åº¦ (nips_task34)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

total_expected=60  # 6 methods Ã— 10 students
total_completed=0

for method in simple_time history lpkt dkt akt simplekt; do
    result_dir="/mnt/localssd/bank/evaluation_results/TASA-llama-best-of-2/nips_task34/$method"
    
    if [ -d "$result_dir" ] && [ -f "$result_dir/overall.json" ]; then
        num_students=$(grep -o '"student_id"' "$result_dir/overall.json" | wc -l)
    else
        num_students=0
    fi
    
    total_completed=$((total_completed + num_students))
    
    percentage=$((num_students * 100 / 10))
    
    echo ""
    echo "ğŸ“ $method:"
    echo "   â€¢ å®Œæˆ: $num_students/10 å­¦ç”Ÿ"
    echo "   â€¢ è¿›åº¦: $percentage%"
    
    if [ $num_students -eq 10 ]; then
        echo "   âœ… å®Œæˆ"
    elif [ $num_students -gt 0 ]; then
        echo "   ğŸ”„ è¿›è¡Œä¸­..."
    else
        echo "   â³ ç­‰å¾…ä¸­..."
    fi
done

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“Š æ€»ä½“è¿›åº¦"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

total_percentage=$((total_completed * 100 / total_expected))

echo "  â€¢ æ€»ä»»åŠ¡æ•°: $total_expected (6 methods Ã— 10 students)"
echo "  â€¢ å·²å®Œæˆ: $total_completed"
echo "  â€¢ æ€»è¿›åº¦: $total_percentage%"
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“ æœ€æ–°æ—¥å¿— (æœ€å30è¡Œ):"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
tail -30 /mnt/localssd/logs/tasa_llama_nips34_all.log

echo ""
