# 📊 训练数据统计报告

## 概览

本报告详细分析了用于训练Knowledge Tracing模型的两个数据集：EdNet和ASSISTments2017。

---

## 📈 数据集对比总结

| 指标 | EdNet | ASSISTments2017 | 对比 |
|------|-------|----------------|------|
| **学生数量** | **3,750** | **1,367** | EdNet是ASSISTments的 **2.7倍** |
| **总交互数** | **1,071,457** | **763,968** | EdNet多 **40%** |
| **唯一Concepts** | **188** | **102** | EdNet多 **84%** |
| **唯一Questions** | **11,784** | **3,141** | EdNet是ASSISTments的 **3.8倍** |
| **平均每学生交互数** | **285.7** | **558.9** | ASSISTments **高95%** |
| **平均序列长度** | **130.6** | **170.3** | ASSISTments略长 |
| **总体正确率** | **66.76%** | **37.30%** | EdNet高出 **29.5个百分点** |
| **时间跨度** | **936天** (2.6年) | **982天** (2.7年) | 相近 |

---

## 📚 数据集1: EdNet

### 基本信息
- 📅 **时间范围**: 2017-05-10 至 2019-12-02 (936天)
- 👥 **总学生数**: **3,750**
- 🔢 **总交互数**: **1,071,457**
- 📖 **唯一Questions**: **11,784**
- 🎯 **唯一Concepts**: **188**

### Fold分布
```
Fold 0: 1,480 条记录 (18.0%)
Fold 1: 1,870 条记录 (22.8%)
Fold 2: 1,539 条记录 (18.8%)
Fold 3: 1,661 条记录 (20.2%)
Fold 4: 1,655 条记录 (20.2%)
Total:  8,205 条记录
```

### 数据密度
- **平均每个学生交互数**: 285.7次
- **平均每个Question被答题数**: 90.9次
- **平均每个Concept被学习数**: 5,699.3次

### 序列长度统计
- **平均长度**: 130.6
- **中位数**: 200.0 (说明有50%的学生序列达到最大长度)
- **最小长度**: 3
- **最大长度**: 200 (截断限制)
- **标准差**: 82.8

### 序列长度分布
```
10th percentile:  11  (10%的学生少于11次交互)
25th percentile:  27  (25%的学生少于27次交互)
50th percentile: 200  (中位数达到最大长度)
75th percentile: 200
90th percentile: 200
95th percentile: 200
99th percentile: 200
```
**分析**: 大约50%的学生有超过200次交互，被截断到200。

### 正确率统计
- ✅ **总体正确率**: **66.76%**
- ✅ **正确答题数**: 715,257
- ❌ **错误答题数**: 356,200
- **正确/错误比**: 2.01:1

### 最常见的10个Concepts
| 排名 | Concept ID | 出现次数 | 占比 |
|------|-----------|---------|------|
| 1 | Concept 7 | 84,785 | 7.91% |
| 2 | Concept 4 | 74,471 | 6.95% |
| 3 | Concept 5 | 61,601 | 5.75% |
| 4 | Concept 8 | 55,884 | 5.22% |
| 5 | Concept 24 | 42,699 | 3.99% |
| 6 | Concept 27 | 41,547 | 3.88% |
| 7 | Concept 2 | 33,353 | 3.11% |
| 8 | Concept 85 | 22,428 | 2.09% |
| 9 | Concept 56 | 19,465 | 1.82% |
| 10 | Concept 20 | 16,096 | 1.50% |

**Top 10 Concepts占比**: 41.22% (说明数据分布相对集中)

---

## 📚 数据集2: ASSISTments2017

### 基本信息
- 📅 **时间范围**: 2004-09-17 至 2007-05-26 (982天)
- 👥 **总学生数**: **1,367**
- 🔢 **总交互数**: **763,968**
- 📖 **唯一Questions**: **3,141**
- 🎯 **唯一Concepts**: **102**

### Fold分布
```
Fold 0:  905 条记录 (20.2%)
Fold 1:  849 条记录 (18.9%)
Fold 2:  867 条记录 (19.3%)
Fold 3:  978 条记录 (21.8%)
Fold 4:  888 条记录 (19.8%)
Total: 4,487 条记录
```

### 数据密度
- **平均每个学生交互数**: 558.9次 (EdNet的**1.95倍**)
- **平均每个Question被答题数**: 243.2次
- **平均每个Concept被学习数**: 7,490.9次

### 序列长度统计
- **平均长度**: 170.3 (比EdNet长30%)
- **中位数**: 200.0
- **最小长度**: 3
- **最大长度**: 200
- **标准差**: 54.9 (比EdNet更集中)

### 序列长度分布
```
10th percentile:  69  (相比EdNet的11，更加密集)
25th percentile: 166  (相比EdNet的27，更加密集)
50th percentile: 200
75th percentile: 200
90th percentile: 200
95th percentile: 200
99th percentile: 200
```
**分析**: 约75%的学生有超过166次交互，数据更加密集。

### 正确率统计
- ✅ **总体正确率**: **37.30%** (明显低于EdNet)
- ✅ **正确答题数**: 284,951
- ❌ **错误答题数**: 479,017
- **正确/错误比**: 0.59:1 (错误多于正确)

**分析**: 低正确率说明题目更具挑战性，或学生水平较低。

### 最常见的10个Concepts
| 排名 | Concept ID | 出现次数 | 占比 |
|------|-----------|---------|------|
| 1 | Concept 21 | 63,874 | 8.36% |
| 2 | Concept 58 | 58,523 | 7.66% |
| 3 | Concept 14 | 36,804 | 4.82% |
| 4 | Concept 5 | 28,103 | 3.68% |
| 5 | Concept 34 | 27,650 | 3.62% |
| 6 | Concept 33 | 21,585 | 2.83% |
| 7 | Concept 37 | 19,997 | 2.62% |
| 8 | Concept 7 | 19,716 | 2.58% |
| 9 | Concept 60 | 18,545 | 2.43% |
| 10 | Concept 10 | 18,030 | 2.36% |

**Top 10 Concepts占比**: 38.96% (略低于EdNet，分布更均匀)

---

## 🔍 深度分析

### 1. 数据规模对比

```
EdNet:
  学生数: ████████████████████████████████████ 3,750
  交互数: ████████████████████████████████████████ 1,071,457

ASSISTments2017:
  学生数: ████████████████ 1,367
  交互数: ████████████████████████████ 763,968
```

**结论**: EdNet数据规模更大，但ASSISTments2017的每个学生数据更密集。

### 2. 数据质量对比

| 维度 | EdNet | ASSISTments2017 | 更优 |
|------|-------|----------------|------|
| **数据密度** | 285.7次/学生 | 558.9次/学生 | ✅ ASSISTments |
| **正确率** | 66.76% | 37.30% | ✅ EdNet (更平衡) |
| **序列完整性** | 50%达到最大长度 | 75%达到最大长度 | ✅ ASSISTments |
| **Concept多样性** | 188个 | 102个 | ✅ EdNet |
| **Question多样性** | 11,784个 | 3,141个 | ✅ EdNet |

### 3. 适用场景

#### EdNet更适合:
- ✅ 需要**大量学生**的场景
- ✅ 需要**多样化Concepts**的研究
- ✅ 研究**中高水平学生**的学习模式
- ✅ **冷启动**问题研究（很多短序列学生）

#### ASSISTments2017更适合:
- ✅ 研究**深度学习轨迹**（每个学生数据更多）
- ✅ **困难题目**的知识追踪
- ✅ 研究**学习困难**学生
- ✅ **时序模型**训练（序列更长更完整）

### 4. 数据挑战

#### EdNet的挑战:
1. **序列长度不均**: 标准差82.8，50%学生差异很大
2. **长尾分布**: 很多学生只有很少交互记录
3. **截断效应**: 50%学生被截断到200，丢失了后续信息

#### ASSISTments2017的挑战:
1. **低正确率**: 37.3%可能导致模型bias
2. **学生数较少**: 1,367个学生可能不够充分训练大模型
3. **数据老旧**: 2004-2007年的数据，可能不反映当前教育状况

---

## 📊 训练建议

### 对于EdNet:
1. **数据增强**: 考虑对短序列学生进行数据增强
2. **分层训练**: 将学生按序列长度分层，分别训练
3. **权重平衡**: 对短序列学生给予更高权重
4. **去截断**: 考虑增加最大序列长度限制

### 对于ASSISTments2017:
1. **正确率平衡**: 考虑对正确答题进行上采样
2. **迁移学习**: 可以考虑从EdNet预训练，再fine-tune
3. **集成学习**: 由于数据较少，使用集成方法提高鲁棒性
4. **正则化**: 加强正则化防止过拟合

---

## 📈 模型性能预期

基于数据特性，预期模型性能：

### EdNet:
- **预期AUC**: 0.85-0.95
- **实际最佳**: simpleKT达到 **0.946** ✅ 超出预期
- **原因**: 数据量大、正确率高、Transformer架构适合

### ASSISTments2017:
- **预期AUC**: 0.70-0.80
- **实际最佳**: LPKT达到 **0.779** ✅ 符合预期
- **原因**: 低正确率增加难度，时间信息帮助提升

---

## 🎯 数据使用建议

### 研究目的推荐:

| 研究目标 | 推荐数据集 | 原因 |
|---------|-----------|------|
| 大规模KT模型 | **EdNet** | 学生数多，数据多样 |
| 深度序列建模 | **ASSISTments2017** | 序列长且密集 |
| 冷启动问题 | **EdNet** | 有大量短序列学生 |
| 困难学生建模 | **ASSISTments2017** | 低正确率，更具挑战 |
| 时间衰减研究 | **两者都可** | 都有完整时间戳 |
| 遗忘曲线研究 | **ASSISTments2017** | 序列更长，更适合长期追踪 |
| 迁移学习 | **EdNet→ASSISTments** | 大数据预训练，小数据fine-tune |

---

## 📁 相关文件

- 📊 **详细分析日志**: `/tmp/training_data_analysis.txt`
- 📈 **对比CSV**: `/tmp/dataset_comparison.csv`
- 🔧 **分析脚本**: `/mnt/localssd/analyze_training_data.py`

---

## 🔄 与模型训练结果的关联

回顾我们训练的模型性能：

### EdNet (大数据集):
- **simpleKT**: Valid AUC **0.946**, Valid ACC **0.869** 🏆
  - 得益于大量数据（107万次交互）
  - Transformer架构充分利用了数据规模

### ASSISTments2017 (密集数据):
- **LPKT**: Valid AUC **0.779**, Valid ACC **0.723** 🏆
  - 时间间隔信息在长序列中发挥作用
  - 克服了低正确率(37%)的挑战

**结论**: 数据特性深刻影响模型选择和性能！

---

**报告生成时间**: 2025-10-18 21:45  
**分析数据**: 训练集（所有folds）  
**总交互数**: 1,835,425次（两个数据集合计）  
**总学生数**: 5,117人（两个数据集合计）

